<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Show Cities</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</head>

<body>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="">Weather Web REST API</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="/">Home</a></li>
        <li><a href="/cities">Show All Cities</a></li>
        <li><a href="/today">Weather Today</a></li>
        <li><a href="/nextdays">Weather Next Days</a></li>
      </ul>
      <h5 style="float: center; text-align:center; margin-left: 80%; ">
        <a href="/city" th:href="@{/ccity(name=${city.name})}" class="btn  btn-outline-info">Celsius</a>
        <a href="/city" th:href="@{/fcity(name=${city.name})}" class="btn  btn-outline-info">Fahrenheit</a>

      </h5>

    </div>

  </nav>
  <p id="demo"></p>


  <div class="container">
    <div class="jumbotron">
      <h1 th:text="${city.name}"></h1>
      <div>

        <h1 th:text="${today.atualDegree}"></h1>
        </di>
      </div>
      
    </div>
    <div class="container">
      <table class="table" th:each="w : ${today}" style="text-align: center;">
        <thead>
          <tr>
            <th scope="col" style="background-color: #F5F5F5;">Day</th>
            <th scope="col">Minimum Temperature</th>
            <th scope="col" style="background-color: #F5F5F5;">Maximum Temperature</th>
            <th scope="col">Precipitation (%)</th>
            <th scope="col" style="background-color: #F5F5F5;">Humidity (%)</th>
            <th scope="col">Wind (km/h)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="background-color: #F5F5F5;"><span th:text="${w.stringDay}"> Day </span></td>
            <td><span th:text="${w.min}"> min </span></td>
            <td style="background-color: #F5F5F5;"><span th:text="${w.max}" id="outputFahrenheit"> max </span></td>
            <td><span th:text="${w.precipitation}"> precipitation </span></td>
            <td style="background-color: #F5F5F5;"><span th:text="${w.humidity}"> humidity </span></td>
            <td><span th:text="${w.wind}"> wind </span></td>
          </tr>

        </tbody>
      </table>
      
    <canvas id="myChart" width="500" height="90"></canvas>
    </div>

   
  <script>

    var temperature = "[[${AI}]]";
    var s3 = temperature.substring(1);
    var myArray = s3.split(",");
    for (var i = 0; i < myArray.length; i++) {
      myArray[i] = parseInt(myArray[i]);
    }

    var hours = "[[${hours}]]";
    var s2 = hours.substring(1);
    var myArrayHours = s2.split(",");
    for (var i = 0; i < myArrayHours.length; i++) {
      myArrayHours[i] = parseInt(myArrayHours[i]);
    }


    var ctx = document.getElementById("myChart");
    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: myArrayHours,
        datasets: [
          {
            data: myArray,
            label: "Today Temperature",
            borderColor: "#3e95cd",
            fill: false
          }

        ]
      }
    });


    function myFunction() {
      var max;
      max = document.getElementById("outputFahrenheit").innerHTML = (valNum - 32) / 1.8;
      document.getElementById("demo").innerHTML = 5 + 6;
    }
  </script>

</body>

</html>